% !TEX root = Thesis.tex
\documentclass[a4paper,11pt]{mimosis}

\usepackage{metalogo}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Some of my favourite personal adjustments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% These are the adjustments that I consider necessary for typesetting
% a nice thesis. However, they are *not* included in the template, as
% I do not want to force you to use them.

% This ensures that I am able to typeset bold font in table while still aligning the numbers
% correctly.

\usepackage{etoolbox}
\usepackage{physics}

% \usepackage{afterpage} %% for page specific geometry


% Make KOMA script happy?
% fore more details see documentatio of KOMA Script options on margins and textarea at
% mirrors.ctan.org/macros/latex/contrib/koma-script/doc/scrguien.pdf
\KOMAoptions{DIV=12}
\KOMAoptions{BCOR=12mm}


\usepackage{multicol}
\setlength{\columnseprule}{0pt}
\setlength\columnsep{10pt}

\usepackage[absolute,overlay]{textpos}

\input{Sources/configuration.tex}

% DELETE THIS FOR use in actual thesis. This just creates filler text
\usepackage{lipsum}

%%%%%%%%%%%%%%%%%%%%%%%%%%
%% GEOMETRY
%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{geometry}
\geometry{
	inner=25mm,
	top=25mm,
	outer=30mm,
	bottom=25mm
}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Hyperlinks & bookmarks
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage[%
  colorlinks = true,
  citecolor  = BrickRed,
  linkcolor  = RoyalBlue,
  urlcolor   = RoyalBlue,
  unicode,
  pdftitle={\PhDTitleEN},
  pdfauthor={\PhDname},
  pdfsubject={Manuscrit de th√®se de doctorat},
  ]{hyperref}

\usepackage{bookmark}
\usepackage[capitalise]{cleveref}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Bibliography
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% I like the bibliography to be extremely plain, showing only a numeric
% identifier and citing everything in simple brackets. The first names,
% if present, will be initialized. DOIs and URLs will be preserved.

\usepackage[%
  autocite     = plain,
  backend      = biber,
  % doi          = true,
  eprint       = true,
  url          = false,
  giveninits   = true,
  hyperref     = true,
  maxbibnames  = 99,
  maxcitenames = 99,
  sorting      = none,
  % sortcites    = true,
  % sortsets     = true,
  style        = phys,
  % citestyle    = authoryear-comp,
  % bibstyle     = phys,
  backref,%
  natbib       = true,
  ]{biblatex}

\input{bibliography-mimosis}
\addbibresource{Thesis.bib}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Fonts
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\ifxetexorluatex
  \usepackage{unicode-math}
  \usepackage{fontspec}

  % \setmainfont{Garamond}
  % \setmainfont{EB Garamond}
  % \setmathfont{Garamond Math}


  % STIX Math Font
  % \setmathfont{STIXTwoMath-Regular}[
  % Extension={.otf},
  % Path=./fonts/STIX2/,
  % Scale=1]

  % \setmainfont{STIXTwoText}[
  %   Extension={.otf},
  %   Path=./fonts/STIX2/,
  %   UprightFont={*-Regular},
  %   BoldFont={*-Bold},
  %   ItalicFont={*-Italic},
  %   BoldItalicFont={*-BoldItalic}
  % ]
  % \setsansfont{texgyreheros}[
  %   Extension={.otf},
  %   Path=./fonts/Heros/,
  %   UprightFont={*-regular},
  %   BoldFont={*-bold},
  %   ItalicFont={*-italic},
  %   BoldItalicFont={*-bolditalic}
  % ]


  % Classical LaTeX Fonts "Latin Modern"
  \setmathfont{latinmodern-math}[
    Extension={.otf},
    Path=./fonts/Latin_Modern/,
    Scale=1
  ]

  \setmainfont{lmroman}[
    Extension={.otf},
    Path=./fonts/Latin_Modern/,
    UprightFont={*-regular},
    BoldFont={*-bold},
    ItalicFont={*-italic},
    BoldItalicFont={*-bolditalic},
    FontFace={db}{n}{Font=*demi-regular,Ligatures=CommonOff},
    FontFace={db}{it}{Font=*demi-oblique,Ligatures=CommonOff},
    FontFace={sc}{n}{Font=*caps-regular,Ligatures=CommonOff},
    FontFace={sc}{it}{Font=*caps-oblique,Ligatures=CommonOff},
  ]

  \setmonofont{lmmono}[
    Scale=MatchLowercase,
    Extension={.otf},
    Path=./fonts/Latin_Modern/,
    UprightFont={*-regular},
    % BoldFont={*-bold},
    ItalicFont={*-italic}
  ]

  \setsansfont{lmsans}[
    Extension={.otf},
    Path=./fonts/Latin_Modern/,
    UprightFont={*-regular},
    BoldFont={*-bold},
    ItalicFont={*-oblique},
    BoldItalicFont={*-boldoblique}
  ]

  % \setfontfamily\mycoverthesefont{Libre Franklin}
  % \setfontfamily\mycoverthesefont{IBM Plex Sans}
  % \setfontfamily\mycoverfont{STIXTwoText}


  % Set fonts for sections, chapters, and page headers
  % options are:
  % normal (main) Font
  % font series: regular, bold, SmallCaps,...
  % font shape: normal, italic, oblique,...
  % \setkomafont{sectioning}{\normalfont\fontseries{db}\fontshape{n}}
  \setkomafont{sectioning}{\normalfont\fontseries{db}\fontshape{it}}
  \setkomafont{pagehead}{\normalfont\fontseries{sc}\fontshape{n}}

\else
  % \usepackage[lf]{ebgaramond}
  % \usepackage{stix2}
  \usepackage{lmodern}
  % \usepackage[garamondx,cmbraces]{newtxmath}
  % \usepackage[oldstyle,scale=0.7]{sourcecodepro}
  \singlespacing
  \usepackage{amsmath}
  \usepackage{amssymb}
  \usepackage{mathtools}
\fi


%%%%% Uncomment for Glossary anc acronyms

\newacronym[description={Singular value decomposition}]{SVD}{SVD}{singular value decomposition}
\newacronym{SNF}{SNF}{Smith normal form}
% \newacronym[description={Topological data analysis}]{TDA}{TDA}{topological data analysis}

\newglossaryentry{LaTeX}{%
  name        = {\LaTeX},
  description = {A document preparation system},
  sort        = {LaTeX},
}

\newglossaryentry{Real numbers}{%
  name        = {\(\mathfrak{R}\)},
  description = {The set of real numbers},
  sort        = {Real numbers},
}

\makeindex
\makeglossaries

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Ordinals
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\makeatletter
\@ifundefined{st}{%
  \newcommand{\st}{\textsuperscript{\textup{st}}\xspace}
}{}
\@ifundefined{rd}{%
  \newcommand{\rd}{\textsuperscript{\textup{rd}}\xspace}
}{}
\@ifundefined{nd}{%
  \newcommand{\nd}{\textsuperscript{\textup{nd}}\xspace}
}{}
\makeatother

\renewcommand{\th}{\textsuperscript{\textup{th}}\xspace}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Incipit
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\title{\PhDTitleEN}
% \subtitle{}
\author{\PhDname}

\begin{document}

%%%% Template files for a Thesis at the CPHT.
%%%% Configure the content of the following frontmatter in Sources/Frontmatter/configuration.tex
\frontmatter
  \include{Sources/Frontmatter/Cover}
  \include{Sources/Frontmatter/Title}
  \include{Sources/Frontmatter/Abstract}

  \selectlanguage{english}
  \tableofcontents

\mainmatter

%%%%%%%%%%%%% If you want to Partition your thesis, use the \part command like;
  \part[A good part]{%
    A good part\\
    %
    \vspace{1cm}
    %
    \begin{minipage}[l]{\textwidth}
    %
    \textnormal{%
      \normalsize
      %
      \begin{singlespace*}
        \onehalfspacing
        %
        You can also use parts in order to partition your great work
        into larger `chunks'. This involves some manual adjustments in
        terms of the layout, though.
      \end{singlespace*}
    }
    \end{minipage}
  }

  \include{Sources/Chapters/template.tex}

% This ensures that the subsequent sections are being included as root
% items in the bookmark structure of your PDF reader.
\bookmarksetup{startatroot}
\backmatter

  %%%%% Glossary %%%%%
  \begingroup
    \let\clearpage\relax
    \glsaddall
    \printglossary[type=\acronymtype]
    \newpage
    \printglossary
  \endgroup

  %%% Bibliography %%%%
  \printindex
  \printbibliography

  \include{Sources/Frontmatter/Backcover}

\end{document}
